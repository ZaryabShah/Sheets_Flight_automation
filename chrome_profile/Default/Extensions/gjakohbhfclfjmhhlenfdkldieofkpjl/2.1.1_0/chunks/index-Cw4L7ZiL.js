import{d as T,r as D,w as z,u as e,_ as f,c as d,o as s,a as n,n as C,b as m,I as _,e as Z,m as q,f as G,g as J,h as $,i as K,j as P,k as M,F,l as L,p as I,q as b,t as p,s as R,v as Q,x as B,y as X,z as Y,A as ee,B as N,C as U,D as te,E as oe,G as se,H as ne,J as re,K as ie,L as ae,M as le,N as de,O as ce}from"./popup-Bk9gj0yf.js";import{T as ue}from"./TooltipIcon-CmPyCcbT.js";import{t as me}from"./_virtual_wxt-plugins-DHgd7gkO.js";import{_ as pe,a as fe}from"./Popup.vue_vue_type_script_setup_true_lang-JHYm3gwT.js";const ve={"data-theme":"light",class:"flex h-16 items-center"},xe={width:"17",height:"12",fill:"none",xmlns:"http://www.w3.org/2000/svg"},O=T({__name:"IproyalBadge",props:{ownedByThisUser:{type:Boolean}},setup(v){return(r,t)=>{const i=D("tooltip");return z((s(),d("div",ve,[(s(),d("svg",xe,[n("g",{"clip-path":"url(#ipr-badge)",class:C(r.ownedByThisUser?"fill-brand-300":"fill-brand-400")},t[0]||(t[0]=[n("path",{d:"m9.83325 11.5889 6.28165-8.78771c.1832-.25668.5729-.1214.5729.19771v8.59H9.83325Zm-2.72867-.1158L.82288 2.68535C.639692 2.42867.25 2.56395.25 2.88306v8.59004h6.85458Z","fill-opacity":".65"},null,-1),n("path",{d:"m8.5 9.69218 1.18187 1.64172H16.5L9.00652.930478c-.25326-.350948-.76143-.350948-1.01469 0L.5 11.3339h6.81813L8.5 9.69218Z","fill-opacity":".9"},null,-1)]),2),t[1]||(t[1]=n("defs",null,[n("clipPath",{id:"ipr-badge"},[n("path",{fill:"#fff",d:"M.5.666656h16v10.6667H.5z"})])],-1))]))])),[[i,r.ownedByThisUser?("m"in r?r.m:e(f)).extensionProxiesByIPRoyal():("m"in r?r.m:e(f)).extensionProxiesByIPRoyalWithAnotherAccount()]])}}}),S=T({__name:"FavoriteButton",props:{favorite:{type:Boolean}},emits:["toggle"],setup(v,{emit:r}){const t=r;return(i,u)=>{const a=D("tooltip");return z((s(),d("button",{onClick:u[0]||(u[0]=w=>t("toggle"))},[m(e(_),{type:i.favorite?"favorite-filled":"favorite",class:"size-16 text-brand-400"},null,8,["type"])])),[[a,i.favorite?("m"in i?i.m:e(f)).extensionProxiesRemoveFromFavorites():("m"in i?i.m:e(f)).extensionProxiesAddToFavorites()]])}}}),ye={},be={class:"relative"};function ge(v,r){return s(),d("div",be,r[0]||(r[0]=[n("div",{class:"size-8 rounded-16 bg-current opacity-50"},null,-1),n("div",{class:"absolute inset-0 m-auto size-4 rounded-16 bg-current"},null,-1)]))}const A=Z(ye,[["render",ge]]),he=["onClick"],Pe=T({__name:"Menu",props:q({items:{},textAlignment:{},target:{},sizing:{type:Function},closeOnFocusLoss:{type:Boolean},offset:{},placement:{},role:{}},{modelValue:{type:Boolean,default:!1},modelModifiers:{}}),emits:["update:modelValue"],setup(v){const r=G(v,"modelValue"),t=J(v,["items"]);return(i,u)=>(s(),$(e(pe),K(t,{modelValue:r.value,"onUpdate:modelValue":u[0]||(u[0]=a=>r.value=a),role:"menu",class:"p-8"}),{default:P(()=>[M(i.$slots,"top"),m(e(fe),{class:"flex flex-col gap-8"},{default:P(()=>[(s(!0),d(F,null,L(i.items,(a,w)=>(s(),d("li",{key:w,class:C(["tp-body-s flex h-40 items-center gap-8 rounded-4 px-16",[a.type==="danger"?"text-error-600 hover:bg-error-50":"hover:bg-brand-100",i.textAlignment==="center"?"justify-center":"justify-left",a.disabled?"cursor-default opacity-50 hover:bg-transparent":"cursor-pointer"]]),role:"menuitem",tabindex:-1,onClick:()=>{a.disabled||(a.action(),r.value=!1)}},[a.icon?(s(),$(e(_),{key:0,type:a.icon},null,8,["type"])):I("",!0),b(" "+p(a.name),1)],10,he))),128))]),_:1}),M(i.$slots,"bottom")]),_:3},16,["modelValue"]))}}),ke={class:"flex flex-col"},we={class:"mb-4 flex items-center gap-4"},_e=["src"],$e={class:"max-w-[160px] truncate font-semibold"},Ce={class:"tp-body-xs flex items-center gap-8 truncate"},Ie={key:0,class:"tp-body-xs border-brand-current ml-auto flex h-24 min-w-[84px] items-center rounded-4 border px-8 font-semibold text-brand-400"},Te=T({__name:"ProxyListItem",props:{proxy:{},active:{type:Boolean},currentUserId:{}},emits:["toggle","favorite","remove"],setup(v,{emit:r}){const t=r,i=R(!1),u=R(),a=Q(),w=B(()=>[{name:X(),icon:"edit",disabled:v.active||v.proxy.type==="residential"&&v.proxy.owningUserId!==v.currentUserId,action:()=>{a.push({name:v.proxy.type==="residential"?"/proxies/residential/[id]":"/proxies/manual/[id]",params:{id:v.proxy.id}})}},{name:Y(),icon:"trash",type:"danger",disabled:v.active,action:()=>{t("remove")}}]);return(c,y)=>(s(),d("div",{class:C(["flex items-center rounded-12 border p-16",c.active?"border-brand-400 bg-brand-50":"border-transparent bg-neutral-0"])},[n("div",ke,[n("div",we,[c.proxy.type==="residential"&&c.proxy.additionalConfig.countryCodes.length>0?(s(!0),d(F,{key:0},L(c.proxy.additionalConfig.countryCodes,g=>(s(),d("img",{key:g,src:e(ee)(`flags/${g.toLowerCase()}.svg`),class:"h-16 w-[22px] rounded-4"},null,8,_e))),128)):I("",!0),n("div",$e,p(c.proxy.name),1),n("button",{ref_key:"menuButton",ref:u,class:"cursor",onClick:y[0]||(y[0]=g=>i.value=!0)},[m(e(_),{type:"more-vert",class:"size-20"})],512)]),n("div",Ce,[m(S,{favorite:!!c.proxy.favorite,onToggle:y[1]||(y[1]=g=>t("favorite"))},null,8,["favorite"]),c.proxy.type==="residential"?(s(),$(O,{key:0,"owned-by-this-user":c.proxy.owningUserId===c.currentUserId},null,8,["owned-by-this-user"])):I("",!0),b(" "+p(c.proxy.proxy.host),1)])]),m(e(Pe),{modelValue:e(i),"onUpdate:modelValue":y[2]||(y[2]=g=>N(i)?i.value=g:null),target:e(u),placement:"bottom-end",offset:0,items:e(w)},null,8,["modelValue","target","items"]),c.active?(s(),d("div",Ie,p(("m"in c?c.m:e(f)).extensionConnected()),1)):(s(),$(e(U),{key:1,kind:"outlined",size:"s",class:"ml-auto min-w-[84px]",onClick:y[3]||(y[3]=g=>t("toggle"))},{default:P(()=>[b(p(("m"in c?c.m:e(f)).extensionConnect()),1)]),_:1}))],2))}}),Be={class:"flex flex-col text-neutral-0"},Ue={class:"truncate"},ze={key:0,class:"mt-8 flex flex-col items-center"},Fe={class:"tp-headline-s max-w-full truncate"},Le={class:"tp-body-s mb-8 flex max-w-full items-center gap-8 truncate text-brand-300"},Re={key:1,class:"tp-body-xs mx-auto mt-16 flex items-center rounded-t-8 bg-brand-600 px-16 py-4 font-semibold text-brand-300"},Ve={class:"grid grow grid-rows-[max-content_1fr_max-content] overflow-hidden"},De={key:0,class:"flex gap-4"},Me=["onClick"],Ae={key:1,class:"relative flex items-center overflow-hidden rounded-full border border-current pr-16 text-neutral-600 focus-within:border-brand-800"},Ne=["placeholder"],Oe={class:"scrollbar-thin mt-16 flex grow flex-col gap-8 overflow-auto"},Se={key:0,class:"m-auto"},We={class:"mt-auto grid grid-cols-2 gap-8 pt-16"},Ge=T({__name:"index",setup(v){const{data:r}=te(),t=oe(),i=[{name:ie(),type:"all"},{name:ae(),type:"favorites"},{name:le(),type:"recent"}],u=R("all"),a=R(""),w=B(()=>a.value.trim().toLowerCase());se(()=>[u.value,a.value],([o,x])=>{me("filter_used",{filter_used:o,search_term:o==="search"?x:void 0})},{deep:!0,debounce:300});const c=()=>{const o=u.value;if(o==="all"&&!w.value)return[...t.proxies];if(o==="recent"){const h=[...t.proxies].sort((k,H)=>{const j=k.lastUsed??0;return(H.lastUsed??0)-j}),l=[];for(const k of h){if(l.length>=5)break;k.lastUsed&&l.push(k)}return l}return t.proxies.filter(h=>o==="favorites"?h.favorite:o==="search"?h.name.toLowerCase().includes(w.value):!0)},y=B(()=>{const o=c();return o.sort((x,h)=>x.favorite&&!h.favorite?-1:!x.favorite&&h.favorite?1:0),o}),g={disconnected:{text:re,classes:"text-neutral-400 border-neutral-400/20"},connected:{text:ne,classes:"text-success-500 border-success-500/20"},error:{text:()=>t.connection.error??"",classes:"text-error-500 border-error-500/20"}},V=B(()=>g[t.connection.status]),W=o=>{t.selectedProxyId=o,t.selectedProxy&&(t.selectedProxy.lastUsed=Date.now())},E=()=>{t.selectedProxyId=null};return(o,x)=>{const h=D("tooltip");return s(),$(ce,{back:!1,"disable-header-bottom-padding":!!e(t).selectedProxy},{header:P(()=>[n("div",Be,[z((s(),d("div",{class:C(["tp-body-xs mx-auto flex w-max items-center gap-4 rounded-32 border px-8 font-semibold",e(V).classes])},[m(A),n("div",Ue,p(e(V).text()),1)],2)),[[h,e(t).connection.status==="error"?e(V).text():""]]),e(t).selectedProxy?(s(),d("div",ze,[n("div",Fe,p(e(t).selectedProxy.name),1),n("div",Le,[m(S,{favorite:!!e(t).selectedProxy.favorite,onToggle:x[0]||(x[0]=l=>e(t).toggleFavoriteProxy(e(t).selectedProxy.id))},null,8,["favorite"]),e(t).selectedProxy.type==="residential"?(s(),$(O,{key:0,"owned-by-this-user":e(t).selectedProxy.owningUserId===e(r)?.id},null,8,["owned-by-this-user"])):I("",!0),b(" "+p(e(t).selectedProxy.proxy.host),1)]),m(e(U),{kind:"outlined",size:"s","color-scheme":"secondary",onClick:E},{default:P(()=>[b(p(("m"in o?o.m:e(f)).extensionDisconnect()),1)]),_:1})])):I("",!0),e(t).selectedProxy?(s(),d("div",Re,[b(p(("m"in o?o.m:e(f)).extensionWebRtcIpProtection())+" ",1),m(e(ue),{class:"ml-4 mr-8 text-current"},{default:P(()=>[b(p(("m"in o?o.m:e(f)).extensionWebRtcIpProtectionTooltip()),1)]),_:1}),m(A,{class:C(["mr-4",e(t).isWebrtcProtectionEnabled?"text-success-500":"text-neutral-400"])},null,8,["class"]),b(" "+p(e(t).isWebrtcProtectionEnabled?("m"in o?o.m:e(f)).extensionWebRtcIpProtectionOn():("m"in o?o.m:e(f)).extensionWebRtcIpProtectionOff()),1)])):I("",!0)])]),default:P(()=>[n("div",Ve,[e(u)!=="search"?(s(),d("div",De,[(s(),d(F,null,L(i,l=>n("button",{key:l.name,class:C(["tp-body-xs h-32 w-full rounded-full border border-current",e(u)===l.type?"bg-neutral-0 font-semibold text-brand-800":"text-neutral-600"]),onClick:k=>u.value=l.type},p(l.name),11,Me)),64)),n("button",{class:"tp-body-xs h-32 rounded-full border border-current px-16 text-neutral-600",onClick:x[1]||(x[1]=l=>u.value="search")},[m(e(_),{type:"search",class:"size-16"})])])):(s(),d("div",Ae,[m(e(_),{type:"search",class:"absolute left-16 top-8 size-16"}),z(n("input",{"onUpdate:modelValue":x[2]||(x[2]=l=>N(a)?a.value=l:null),class:"tp-body-xs h-30 w-full appearance-none pl-36 focus:outline-none",placeholder:("m"in o?o.m:e(f)).extensionsProxiesSearchPlaceholder()},null,8,Ne),[[de,e(a)]]),n("button",{class:"pointer",onClick:x[3]||(x[3]=()=>{u.value="all",a.value=""})},[m(e(_),{type:"close",class:"size-16"})])])),n("div",Oe,[e(y).length===0?(s(),d("div",Se,p(("m"in o?o.m:e(f)).extensionsProxiesNothingToShow()),1)):(s(!0),d(F,{key:1},L(e(y),l=>(s(),$(Te,{key:l.id,proxy:l,active:l.id===e(t).selectedProxyId,"current-user-id":e(r)?.id,onFavorite:k=>e(t).toggleFavoriteProxy(l.id),onRemove:k=>e(t).removeProxy(l.id),onToggle:k=>W(l.id)},null,8,["proxy","active","current-user-id","onFavorite","onRemove","onToggle"]))),128))]),n("div",We,[m(e(U),{as:"RouterLink",to:{name:"/proxies/create"}},{default:P(()=>[b(p(("m"in o?o.m:e(f)).extensionsProxiesAddProxy()),1)]),_:1}),m(e(U),{kind:"text",as:"a",href:"https://iproyal.com/ip-lookup/",target:"_blank"},{default:P(()=>[b(p(("m"in o?o.m:e(f)).extensionsProxiesIpLookup())+" ",1),m(e(_),{type:"external",class:"size-20"})]),_:1})])])]),_:1},8,["disable-header-bottom-padding"])}}});export{Ge as default};
