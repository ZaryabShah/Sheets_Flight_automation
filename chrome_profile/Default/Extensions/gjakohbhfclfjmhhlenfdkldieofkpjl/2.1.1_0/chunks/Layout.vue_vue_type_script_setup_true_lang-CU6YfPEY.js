import{T as ne,V as re,W as q,Q as Ce,X as ze,S as Ae,Y as _e,Z as xe,d as O,m as U,f as N,$ as Ne,s as T,a0 as Ke,h as P,o as u,a1 as He,b as S,a2 as me,j as $,c as v,p as I,u as e,i as we,k as _,I as A,e as de,a3 as B,a4 as je,a5 as Y,n as J,w as ue,a6 as qe,a as L,x as w,G as Ge,C as M,a7 as fe,a8 as ye,t as C,a9 as Qe,F as j,l as $e,q as E,aa as We,ab as Xe,ac as Ye,ad as Je,ae as Ee,af as Ze,ag as et,ah as tt,ai as at,aj as st,ak as lt,al as ot,am as it,an as nt,ao as rt,ap as dt,aq as ut,ar as ct,as as pt,at as Q,au as mt,av as ft,aw as yt,ax as bt,ay as vt,az as gt,aA as kt,aB as ht,aC as St,aD as Vt,aE as It,aF as Pt,aG as Ct,aH as xt,aI as wt,aJ as $t,aK as Et,aL as Lt,aM as Dt,aN as Ot,aO as Rt,aP as Bt,aQ as Tt,aR as Mt,aS as Ut,aT as Ft,aU as zt,aV as At,aW as _t,aX as Nt,aY as Kt,r as Ht,aZ as be,a_ as jt,a$ as qt,b0 as Gt,b1 as Qt,b2 as Wt,b3 as Xt,b4 as Yt,b5 as Jt,b6 as ve,b7 as Zt,U as ea,b8 as ta,O as aa,B as sa,_ as le,b9 as ge}from"./popup-Bk9gj0yf.js";import{e as la,a as ce,u as oa,c as ia,g as na,S as R,_ as ra,b as da}from"./ProxyNameTextfield.vue_vue_type_script_setup_true_lang-BJ1vzIl5.js";import{f as ua}from"./Popup.vue_vue_type_script_setup_true_lang-JHYm3gwT.js";import{i as Le}from"./tiny-invariant-CopsF_GD.js";import{T as ke}from"./TooltipIcon-CmPyCcbT.js";import{j as ca}from"./_virtual_wxt-plugins-DHgd7gkO.js";import{T as Z}from"./Toggle-BdQKRl_1.js";const pa=new Set,z={Idle:"idle",Loading:"loading",Success:"success",Error:"error"},ma=t=>{let s,o=!1;const l=async()=>{await s},a=ne({status:z.Idle,data:void 0,error:void 0,get loading(){return this.status===z.Loading},get loadingPromise(){return o?l():re(()=>[z.Success,z.Error].includes(a.status)).toBe(!0)}});return[a,async g=>{try{Object.assign(a,{status:z.Loading}),s=t(g);const k=await s;Object.assign(a,{data:k,error:void 0,status:z.Success})}catch(k){Object.assign(a,{error:k,status:z.Error});for(const c of pa)c(k)}finally{o=!0}},{reset:()=>{Object.assign(a,{error:void 0,data:void 0,status:z.Idle})}}]},ae=t=>{const s=new URLSearchParams;for(const[o,l]of Object.entries(t))if(Array.isArray(l))for(const a of l)s.append(`${o}[]`,String(a));else l!==void 0&&l!==""&&s.set(o,String(l));return s.toString()},fa=async t=>q({path:`v1/product?slug=${t}`}),ya=["product-combined-royal-data"],ba=["royal-subscription-data"],G=Ce({key:()=>ya,query:async()=>{const[t,s]=await Promise.all([fa("royal-residential-proxies"),ze()]);return t.type!=="proxy_royal_residential"?new Ae({path:"/404"}):{product:t,user:s}}});Ce({key:()=>ba,query:()=>_e()});const De=(t,s)=>xe(Math.round(t),1,s),va=(t,s,o)=>{const l=De(s,o);let a=l,d=t;return t==="d"&&(a=l*24,d="h"),`${a}${d}`},ga=t=>{const{primary:s,secondary:o,isp:l}=t;let a="";if(s.length>0&&s[0]!==void 0){const d=s.map(n=>n.filterValue).join(",");a+=`_${s[0].type}-${d}`}return o&&(a+=`_${o.type}-${o.filterValue}`),l&&(a+=`_isp-${l}`),t.rotation==="sticky"&&(a+=`_session-${t.sessionId}_lifetime-${t.lifetime}`),t.highEndPool&&(a+="_streaming-1"),t.skipIspStatic&&(a+="_skipispstatic-1"),t.filterStatic&&(a+="_ispstatic-1"),t.filterDirect&&(a+="_direct-1"),t.skipIpsList&&(a+=`_skipipslist-${t.skipIpsList}`),t.filterDevice&&(a+=`_device-${t.filterDevice.value}`),t.skipCountry&&(a+=`_skipcountry-${t.skipCountry.filterValue}`),t.skipCity&&(a+=`_skipcity-${t.skipCity?.filterValue}`),t.skipIsp&&(a+=`_skipisp-${t.skipIsp}`),a},ka=ca("0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",8),ha=(t,s)=>q({apiType:"residential",path:`v1/residential-users/${t}/ips-skipping?${ae({page:s.page,perPage:s.perPage})}`}),Sa=()=>q({path:"/v1/royal/locations/primary"}),he=(t,s)=>{const o=ae({primary_location_filter_values:t,secondary_location_isp_filter_value:s});return q({path:`/v1/royal/locations/secondary?${o.toString()}`})},Se=t=>{const s=ae({filter_value:t.filterValue,search:t.search,per_page:t.perPage,page:t.page});return q({path:`/v1/royal/locations/isp?${s.toString()}`})},Va=()=>q({path:"v1/user/me/royal/reset-sessions",method:"POST"}),Ia=O({inheritAttrs:!1,__name:"Dialog",props:U({disableTeleport:{type:Boolean},hideCloseButton:{type:Boolean}},{modelValue:{type:Boolean,default:!1},modelModifiers:{}}),emits:["update:modelValue"],setup(t){const s=N(t,"modelValue"),o=()=>{s.value=!1};Ne(document,"keydown",d=>{s.value&&d.key==="Escape"&&(o(),d.preventDefault())});const l=T();Ke(()=>{s.value&&queueMicrotask(()=>{const d=l.value;if(!d)return;(ua(d)??d)?.focus()})});const a=s.value;return(d,n)=>(u(),P(He,{to:"body",disabled:d.disableTeleport},[S(me,{name:"dialog-scrim"},{default:$(()=>[s.value?(u(),v("div",{key:0,class:"fixed inset-0 z-[11] overscroll-contain bg-[rgba(0,0,0,70%)]",onClick:o})):I("",!0)]),_:1}),S(me,{name:"dialog",appear:e(a)},{default:$(()=>[s.value?(u(),v("focus-trap",we({key:0,ref_key:"dialogEl",ref:l,class:"dialog-element fixed inset-0 z-[11] m-auto h-min w-full overscroll-contain rounded-8 bg-neutral-0 shadow-l outline-none",tabindex:"-1"},d.$attrs),[d.hideCloseButton?I("",!0):(u(),v("button",{key:0,class:"absolute right-20 top-20",onClick:o},[S(e(A),{type:"close"})])),_(d.$slots,"default",{close:o},void 0,!0)],16)):I("",!0)]),_:3},8,["appear"])],8,["disabled"]))}}),Pa=de(Ia,[["__scopeId","data-v-d8889315"]]),Ca=(t,s)=>!s||t===s&&typeof t=="object"?!0:!la(t,s),ee=(t,s,o)=>{const[l,a]=ma(k=>s(k.value,{refetching:k.refetching})),d=o?.filter??Ca,n=je(k=>void a(k),()=>Y(o?.debounce)??0),g=async()=>{await n({value:Y(t),refetching:!0}),await l.loadingPromise};return B(()=>Y(t),(k,c)=>{(l.status==="idle"||d(k,c))&&n({value:k,refetching:!1})},{immediate:o?.immediate??!0,deep:o?.deep??!1}),[l,{refetch:g}]},xa=["value","indeterminate","name"],wa={key:0,class:"pointer-events-none z-0 text-neutral-0",width:"16",height:"12",fill:"none",xmlns:"http://www.w3.org/2000/svg"},$a=O({__name:"CheckBox",props:U({name:{default:""},size:{default:"m"},indeterminate:{type:Boolean,default:!1}},{modelValue:{type:Boolean,default:!1},modelModifiers:{}}),emits:["update:modelValue"],setup(t){const s=N(t,"modelValue"),o={s:"size-16",m:"size-24"};return(l,a)=>(u(),v("div",{class:J(["relative flex shrink-0 items-center justify-center",o[l.size]])},[ue(L("input",{"onUpdate:modelValue":a[0]||(a[0]=d=>s.value=d),value:t.modelValue,indeterminate:l.indeterminate,name:l.name,type:"checkbox",class:J(["absolute size-full cursor-pointer appearance-none rounded-4 border-2 border-brand-600 outline-brand-300",t.modelValue?"border-transparent bg-brand-400":""])},null,10,xa),[[qe,s.value]]),l.size==="m"?(u(),v("svg",wa,a[1]||(a[1]=[L("path",{d:"M6 12 0 6l2-1 4 4 8-9 2 2L6 12Z",fill:"currentColor"},null,-1)]))):(u(),P(e(A),{key:1,type:l.indeterminate?"minus":"check",class:"z-0 size-[13px] text-neutral-0"},null,8,["type"]))],2))}}),Ea=O({__name:"InfoBanner",props:{type:{default:"warn"},icon:{}},setup(t){const s={error:"border-error-600 text-error-600 bg-error-50",success:"border-success-500 text-success-700 bg-success-50",warn:"border-accent-300 text-accent-300 bg-accent-50",info:"border-brand-400 text-brand-500 bg-brand-100"},o={error:"error",success:"check-circle",warn:"info",info:"info"};return(l,a)=>(u(),v("div",{class:J(["flex items-center gap-12 rounded-4 border px-16 py-8",s[l.type]])},[_(l.$slots,"icon",{},()=>[S(e(A),{type:l.icon||o[l.type]},null,8,["type"])]),L("div",null,[_(l.$slots,"default")])],2))}}),Oe=t=>{const s=window.matchMedia(t),o=T(s.matches);return s.addEventListener("change",l=>{o.value=l.matches}),o},La={key:0},Da={key:0,class:"flex items-center gap-16"},Oa={class:"tp-body-s whitespace-nowrap font-semibold text-neutral-500"},Ra={key:1,class:"flex justify-evenly gap-4 xs:gap-8"},Ba={key:0,class:"tp-body-s flex h-full items-center px-16 font-semibold"},X="...",Ta=O({__name:"Pagination",props:{current:{},total:{},type:{default:"button"},customButtonProps:{type:Function}},emits:["change","customTextFieldChange"],setup(t,{emit:s}){const o=s,l={isDisabled:()=>t.current<=1,index:()=>t.current-1},a={isDisabled:()=>t.current>=t.total,index:()=>t.current+1},d=f=>typeof f=="object",n=(f,i)=>{const x=i-f+1;return Array.from({length:x},(D,h)=>h+f)},g=Oe("(max-width: 600px)"),k=w(()=>t.total>25||g.value&&t.total>5),c=w(()=>t.type==="custom"),V=w(()=>{const f=t.current,i=t.total;if(i<=5)return n(1,i);const x=Math.max(f-1,1),D=Math.min(f+1,i),h=x>2,y=D<i-2,b=1,K=i;if(!h&&y){const W=n(1,5);return[l,...W,X,i,a]}if(h&&!y){const W=n(i-5+1,i);return[l,b,X,...W,a]}const H=n(x,D);return[l,b,X,...H,X,K,a]}),p=T(t.current),m=f=>{if(Number.isNaN(f)||!Number.isFinite(f))return;const i=xe(f,1,t.total);p.value=i,c.value?o("customTextFieldChange",i):o("change",i)};Ge(p,f=>void m(f),{debounce:750});const r=f=>{const i=d(f)?f:{isDisabled:()=>!1,index:()=>Number(f)},x=i.index(),D={size:"m",disabled:i.isDisabled(),kind:d(f)?"outlined":"text"};return c.value?{...D,...t.customButtonProps?.(x)}:{...D,onClick:()=>{p.value=x}}};return(f,i)=>f.total>1?(u(),v("div",La,[k.value?(u(),v("div",Da,[S(e(M),fe(ye(r(l))),{default:$(()=>[S(e(A),{type:"backward"})]),_:1},16),S(e(ce),{modelValue:p.value,"onUpdate:modelValue":i[0]||(i[0]=x=>p.value=x),min:1,max:f.total,type:"number",name:"page","hide-empty-decorations":"",size:"m",class:"w-[74px]","disable-validation":"",onChange:i[1]||(i[1]=x=>m(x))},null,8,["modelValue","max"]),L("div",Oa,C(Qe({total:f.total})),1),S(e(M),fe(ye(r(a))),{default:$(()=>[S(e(A),{type:"forward"})]),_:1},16)])):(u(),v("ul",Ra,[(u(!0),v(j,null,$e(V.value,(x,D)=>(u(),v("li",{key:D},[x===X?(u(),v("div",Ba,C(x),1)):(u(),P(e(M),we({key:1,ref_for:!0},r(x),{class:["h-48",[x===f.current&&"!border !border-neutral-300 !bg-neutral-100 text-brand-800",d(x)?"w-80 md:w-56":"w-[42px]"]]}),{default:$(()=>[d(x)?(u(),P(e(A),{key:0,type:D===V.value.length-1?"forward":"backward"},null,8,["type"])):(u(),v(j,{key:1},[E(C(x),1)],64))]),_:2},1040,["class"]))]))),128))]))])):I("",!0)}}),Ma=["value","name","disabled"],Ua=O({__name:"Radio",props:U({name:{},value:{},disabled:{type:Boolean}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(t){const s=N(t,"modelValue");return(o,l)=>ue((u(),v("input",{"onUpdate:modelValue":l[0]||(l[0]=a=>s.value=a),value:o.value,name:o.name,disabled:o.disabled,type:"radio",class:"relative size-24 shrink-0 cursor-pointer appearance-none rounded-full border-2 border-brand-600 outline-brand-300"},null,8,Ma)),[[We,s.value]])}}),Fa=de(Ua,[["__scopeId","data-v-442f600c"]]),za={class:"px-20 pt-28 sm:px-40 sm:pt-40"},Aa={key:0,class:"tp-headline-s sm:tp-headline-m mb-24"},_a={class:"scrollbar-thin stable scrollbar-stable mb-8 flex grow flex-col overflow-y-auto px-20 pb-16 sm:px-40"},Na={key:2,class:"m-auto"},Ka={key:0,class:"m-auto"},Ha={class:"truncate"},ja={class:"px-20 sm:px-40"},qa={class:"mt-24 grid grid-cols-1 gap-20 sm:grid-cols-2"},Ga={key:1,class:"tp-body-s mt-20 text-center"},Qa=O({__name:"ManyDialog",props:{initialSelection:{},loader:{},multiple:{default:!1},valueKey:{},labelKey:{},label:{},disableSearch:{type:Boolean,default:!1},disableClearing:{type:Boolean,default:!1}},emits:["save"],setup(t,{emit:s}){const o=s,l=ne({search:"",page:1});B(()=>l.search,()=>{l.page=1});const[a]=ee(()=>({...l}),p=>t.loader(p),{debounce:300,deep:!0}),d=Xe(new Map(Ye(t.initialSelection))),n=()=>{d.clear(),g()},g=()=>{o("save",new Map(d))},k=(p,m)=>{const r=p[t.valueKey];m?d.set(r,p):d.delete(r)},c=p=>{const m=p[t.valueKey];d.clear(),d.set(m,p)},V=w(()=>{const p=d.entries(),[m]=p.next().value??[];return m});return(p,m)=>(u(),v(j,null,[L("div",za,[p.label?(u(),v("div",Aa,C(p.label),1)):I("",!0)]),L("div",_a,[p.disableSearch?I("",!0):(u(),P(e(ce),{key:0,modelValue:l.search,"onUpdate:modelValue":m[0]||(m[0]=r=>l.search=r),name:"search",type:"search",placeholder:Je(),"hide-empty-decorations":"",class:"sticky top-0 z-[1] mb-16 grow-0"},null,8,["modelValue","placeholder"])),e(a).error?(u(),P(e(Ea),{key:1,type:"error"},{default:$(()=>[E(C(e(Ee)(e(a).error)),1)]),_:1})):!e(a).data&&e(a).loading||e(a).status==="idle"?(u(),v("div",Na,C(Ze()),1)):e(a).data?(u(),v(j,{key:3},[e(a).data.data.length===0?(u(),v("div",Ka,C(et()),1)):(u(),v("fieldset",{key:1,class:J(["flex flex-col gap-4 transition-opacity",e(a).loading&&"opacity-50"])},[(u(!0),v(j,null,$e(e(a).data.data,(r,f)=>(u(),v("label",{key:f,class:"grid grid-cols-[auto_1fr] min-h-[40px] items-center gap-24 rounded-4 bg-brand-50 px-16 py-8"},[(u(),P(ot(p.multiple?e($a):e(Fa)),{"model-value":p.multiple?e(d).has(r[p.valueKey]):V.value,name:"select-dialog",value:r[p.valueKey],"onUpdate:modelValue":i=>p.multiple?k(r,i):c(r)},null,8,["model-value","value","onUpdate:modelValue"])),L("div",Ha,[_(p.$slots,"default",{option:r},()=>[E(C(r[p.labelKey]),1)])])]))),128))],2))],64)):I("",!0)]),L("div",ja,[e(a).data?(u(),P(e(Ta),{key:0,current:e(a).data.meta.currentPage,total:e(a).data.meta.lastPage,onChange:m[1]||(m[1]=r=>l.page=r)},null,8,["current","total"])):I("",!0),L("div",qa,[S(e(M),{onClick:g},{default:$(()=>[E(C(tt()),1)]),_:1}),p.disableClearing?I("",!0):(u(),P(e(M),{key:0,kind:"outlined",onClick:n},{default:$(()=>[E(C(p.multiple?at():st()),1)]),_:1}))]),p.disableClearing?I("",!0):(u(),v("div",Ga,C(lt()),1))])],64))}}),Wa={class:"relative w-full"},Xa={key:0,class:"text-neutral-600"},Ya={key:1,class:"truncate"},Ja={key:2,class:"flex items-center gap-8"},Za={class:"tp-body-xs min-w-[20px] rounded-4 bg-brand-400 p-4 font-semibold text-neutral-0"},te=O({__name:"ManySelect",props:U({loader:{},modelValue:{},multiple:{default:!0},initialOptions:{default:()=>[]},size:{default:()=>nt().manySelectFallbackSize},disabled:{type:Boolean},placeholder:{},name:{},valueKey:{},labelKey:{},disableSearch:{type:Boolean,default:!1},disableClearing:{type:Boolean,default:!1},hideEmptyDecorations:{type:Boolean},label:{},labelTooltip:{},errorMessage:{}},{modelValue:{},modelModifiers:{}}),emits:U(["change"],["update:modelValue"]),setup(t,{emit:s}){const o=N(t,"modelValue"),l=s,a=T(!1),{firstSelectedItem:d,selectionMap:n,batchSelectionMapUpdates:g}=oa({items:()=>t.initialOptions,multiple:t.multiple??!0,target:o,key:c=>c[t.valueKey],allowEmptyValues:!0}),k=c=>{if(g(()=>{n.clear(),c.forEach((V,p)=>n.set(p,V))}),t.multiple){const V=[...n.values()].filter(Boolean);l("change",V)}else{const V=n.values().next().value;l("change",V)}a.value=!1};return(c,V)=>(u(),v(j,null,[S(e(ia),{name:c.name,"error-message":c.errorMessage,label:c.label,"hide-empty-decorations":c.hideEmptyDecorations,"label-tooltip":c.labelTooltip},{default:$(()=>[L("div",Wa,[L("button",{role:"combobox",tabindex:0,class:J(["relative flex w-full cursor-default items-center gap-8 rounded-4 outline-none ring-1 ring-inset focus-visible:ring-2",[e(na)(c.size),c.disabled?"bg-neutral-100 text-neutral-400 ring-neutral-400 [-webkit-text-fill-color:theme(colors.neutral.400)]":{"ring-error-600":c.errorMessage,"focus:ring-brand-300":!c.errorMessage,"ring-2 ring-brand-300":a.value&&!c.errorMessage,"ring-neutral-300":!a.value&&!c.errorMessage,"cursor-pointer bg-neutral-0":!0},c.size==="l"?"tp-body":"tp-body-s"]]),onClick:V[0]||(V[0]=()=>{c.disabled||(a.value=!0)})},[e(n).size===0?(u(),v("div",Xa,C(c.placeholder),1)):e(d)&&e(n).size===1?(u(),v("div",Ya,[_(c.$slots,"default",{option:e(d)},()=>[E(C(e(d)?.[c.labelKey]),1)])])):(u(),v("div",Ja,[L("div",Za,C(e(n).size),1),E(" "+C(it()),1)])),S(e(A),{type:"forward",class:"ml-auto",inert:""})],2)])]),_:3},8,["name","error-message","label","hide-empty-decorations","label-tooltip"]),S(Pa,{modelValue:a.value,"onUpdate:modelValue":V[1]||(V[1]=p=>a.value=p),class:"dialog-size flex max-h-[810px] flex-col overflow-hidden rounded-8 pb-20"},{default:$(()=>[S(Qa,{"initial-selection":[...e(n).entries()],label:c.label,loader:c.loader,multiple:c.multiple,"label-key":c.labelKey,"value-key":c.valueKey,"disable-search":c.disableSearch,"disable-clearing":c.disableClearing,onSave:k},{default:$(({option:p})=>[_(c.$slots,"default",{option:p})]),_:3},8,["initial-selection","label","loader","multiple","label-key","value-key","disable-search","disable-clearing"])]),_:3},8,["modelValue"])],64))}}),es=()=>{const{data:t}=G();return w(()=>{const o=Object.values(t.value.product.additionalData.geolocations),l=[];for(const a of o){const d=a.ips.map(n=>({name:`${a.name} (${n})`,value:n}));l.push(...d)}return l})},ts=O({__name:"GeoLocationSelect",props:U({options:{},disabled:{type:Boolean}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(t){const s=N(t,"modelValue");return(o,l)=>(u(),P(e(R),{modelValue:s.value,"onUpdate:modelValue":l[0]||(l[0]=a=>s.value=a),label:dt(),"label-tooltip":rt(),disabled:o.disabled,name:"geo-location",options:o.options,"label-key":"name","value-key":"value"},null,8,["modelValue","label","label-tooltip","disabled","options"]))}}),as=()=>w(()=>[{label:ct(),value:"dns"},{label:pt(),value:"ip"}]),ss=O({__name:"HostnameSelect",props:U({options:{},disabled:{type:Boolean}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(t){const s=N(t,"modelValue");return(o,l)=>(u(),P(e(R),{modelValue:s.value,"onUpdate:modelValue":l[0]||(l[0]=a=>s.value=a),options:o.options,label:ut(),disabled:o.disabled,name:"hostname","label-key":"label","value-key":"value"},null,8,["modelValue","options","label","disabled"]))}}),Re=O({__name:"PrimaryLocationsSelect",props:U({options:{},disabled:{type:Boolean},selectedType:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(t){const s=N(t,"modelValue"),o=l=>{const a=t.selectedType;return a?a==="country"?l.type!==a:!0:!1};return(l,a)=>(u(),P(e(R),{"model-value":s.value??[],label:mt(),multiple:!0,"max-selections":2,name:"country",options:l.options,"label-key":"displayValue","value-key":"id",search:"",placeholder:Q(),disabled:l.disabled,"disable-option":o,"onUpdate:modelValue":a[0]||(a[0]=d=>{s.value=d??[]})},null,8,["model-value","label","options","placeholder","disabled"]))}}),oe=t=>t.map(o=>({...o,label:o.label()})),ls=[{label:It,value:"randomize"},{label:Pt,value:"sticky"}],Be=[{value:"s",label:ft,max:59},{value:"m",label:yt,max:59},{value:"h",label:bt,max:24},{value:"d",label:vt,max:7}],os=[{label:gt,value:"ios"},{label:kt,value:"macos"},{label:ht,value:"android"},{label:St,value:"windows"},{label:Vt,value:"linux"}],Te=t=>{const s=Be.find(o=>o.value===t);return Le(s),s},Me=t=>{const s=[];for(const o of t.additionalData.ports)s.push(o.port,...o.alternativePorts);return s.map(o=>({value:o}))},Ve=t=>{const s=w(()=>Me(t));return Le(s.value[0]),s.value[0].value},is=O({__name:"PortsSelect",props:U({options:{},disabled:{type:Boolean}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(t){const s=N(t,"modelValue");return(o,l)=>(u(),P(e(R),{modelValue:s.value,"onUpdate:modelValue":l[0]||(l[0]=a=>s.value=a),options:o.options,label:xt(),"label-tooltip":Ct(),disabled:o.disabled,name:"port","label-key":"value","value-key":"value"},null,8,["modelValue","options","label","label-tooltip","disabled"]))}}),ie=async t=>(await t).data,ns=t=>{const{data:s}=G(),o=T(!0),l=T(0),[a]=ee(null,async()=>ie(Sa())),d=w(()=>a.data??[]),n=w(()=>d.value.filter(b=>t.primaryLocations.includes(b.id))),g=w(()=>n.value.map(y=>y.filterValue)),k=w(()=>a.status!=="success"||d.value.length===0||n.value[0]?.type!=="country"),[c]=ee(()=>{if(!k.value)return g.value},async y=>{let b=y;return o.value&&(await re(()=>["success","error"].includes(a.status)).toBe(!0),b=g.value),b&&b.length>0?ie(he(b)):[]},{debounce:l}),V=w(()=>c.data?.find(y=>y.id===t.secondaryLocation)),p=w(()=>d.value.filter(b=>b.type==="country")),m=w(()=>p.value.find(b=>t.skipCountry?.includes(b.id))),r=w(()=>a.status!=="success"||p.value.length===0),[f]=ee(()=>{if(!r.value)return m.value?.filterValue},async y=>y?ie(he([y])):[],{debounce:100}),i=w(()=>f.data?.find(y=>y.id===t.skipCity)),x=B(()=>a.status,y=>{(y==="success"||y==="error")&&(l.value=100,x())});B(()=>t.primaryLocations,()=>{t.secondaryLocation=void 0,t.isp=void 0},{deep:!0}),B(()=>t.secondaryLocation,()=>{t.isp=void 0}),B(()=>t.skipCountry,()=>{t.skipCity=void 0,t.skipIsp=void 0},{deep:!0}),B(()=>t.skipCity,()=>{t.skipIsp=void 0});const D=w(()=>a.error||c.error),h=w(()=>{let y=!1;for(const b of[a,c])(b.loading||b.status==="idle")&&(y=!0);return y});return{error:D,loading:h,primary:{get items(){return d.value},get selectedItems(){return n.value},get selectedType(){return this.selectedItems[0]?.type},get disabled(){return a.status!=="success"}},secondary:{get items(){return c.data??[]},get selectedItem(){return V.value},get disabled(){return k.value||this.items.length===0}},isp:{get disabled(){return k.value},get visible(){return s.value.user.isFilterByIspEnabled}},skipCountry:{get items(){return p.value},get selectedItem(){return m.value},get disabled(){return a.status!=="success"},get visible(){return s.value.user.isSkipCountryEnabled}},skipCity:{get items(){return f.data??[]},get selectedItem(){return i.value},get disabled(){return r.value||!m.value||this.items.length===0},get visible(){return s.value.user.isSkipCityEnabled}},skipIsp:{get disabled(){return r.value||!m.value},get visible(){return s.value.user.isSkipIspEnabled}}}},rs=(t,s={})=>{const{data:o}=G(),l=es(),a=as(),d=(b,K)=>{const H=()=>Y(s)[b],F={get visible(){return!H()?.excluded},get disabled(){return H()?.disabled??!1}};return new Proxy(K,{get(W,se,Fe){const pe=Reflect.get(W,se,Fe)??!0;return se in F?F[se]&&pe:pe}})},n=d("hostname",{get items(){return a.value},get visible(){return o.value.user.isIpAccessEnabled??!1}}),g=d("geoLocation",{get items(){return l.value},get visible(){return t.hostname!=="dns"&&n.visible}}),k={get items(){return oe(ls)}},c=d("ipSkipping",{get visible(){return o.value.user.isIpsSkippingEnabled??!1}}),V={get items(){return Me(o.value.product)}},p=w(()=>oe(Be)),m=w(()=>Te(t.ttlFormat)),r={get items(){return p.value},get selectedItem(){return m.value},get visible(){return t.rotation==="sticky"}},f=w(()=>oe(os)),i=w(()=>f.value.find(b=>b.value===t.filterDevice)),x={get items(){return f.value},get selectedItem(){return i.value},get visible(){return o.value.user.isFilterByDeviceEnabled??!1}};B(m,b=>{t.ttlValue=b.max});const{error:D,loading:h,...y}=ns(t);return{error:D,loading:h,options:{...y,hostname:n,geoLocation:g,rotation:k,ipSkipping:c,ttl:r,devices:x,ports:V}}},Ie=t=>({highEndPoolEnabled:!1,skipIspStaticEnabled:!1,filterStaticEnabled:!1,filterDirectEnabled:!1,primaryLocations:[],secondaryLocation:void 0,isp:void 0,ispItem:void 0,geoLocation:t.product.additionalData.defaultGeolocationIp,rotation:"randomize",hostname:"dns",ipSkipping:void 0,ipSkippingItem:void 0,ttlFormat:"m",ttlValue:30,filterDevice:void 0,skipCountry:void 0,skipCity:void 0,skipIsp:void 0,skipIspItem:void 0}),ds=t=>{const s=localStorage.getItem(t);let o=null;if(s!=null)try{o=JSON.parse(s)}catch{o=null}return o},Pe="proxy-access-options",us=t=>t===!0?`${Pe}`:typeof t=="string"?`${Pe}/${t}`:null,cs=(t,s,o)=>{if(t){const a={...s,...t},d=Ve(o);return{...a,port:d}}const l=Ve(o);return{...s,port:l}},ps=t=>{const{data:s}=G(),o=us(t.persist??!0),l=o!==null?ds(o):null,a=ne(cs(l??t.initialState,Ie(s.value),s.value.product)),d=w(()=>Te(a.ttlFormat));return o!==null&&B(a,g=>{localStorage.setItem(o,JSON.stringify({...g,ttlValue:De(g.ttlValue,d.value.max)}))},{deep:!0}),{state:a,reset:()=>Object.assign(a,Ie(s.value))}},ms=(t,s)=>{const{data:o}=G(),{state:l,reset:a}=ps(s),d=p=>Y(t)[p],n=new Proxy(l,{get(p,m,r){const f=d(m);return f&&"value"in f?f.value:Reflect.get(p,m,r)},set(p,m,r){const f=d(m);return f&&"value"in f||(p[m]=r),!0}}),{options:g,error:k,loading:c}=rs(n,t);return{generateConfig:p=>{const{user:m}=o.value,{primary:r,secondary:f,isp:i}=g;return ga({primary:r.selectedItems,secondary:f.disabled?void 0:f.selectedItem,isp:i.visible&&!i.disabled?l.isp:void 0,rotation:l.rotation,lifetime:va(l.ttlFormat,l.ttlValue,g.ttl.selectedItem.max),skipIpsList:g.ipSkipping.visible?l.ipSkipping:void 0,highEndPool:m.isHighEndPoolAccessEnabled&&l.highEndPoolEnabled,skipIspStatic:m.isSkipIspStaticAccessEnabled&&l.skipIspStaticEnabled,sessionId:p,filterStatic:m.isFilterIspStaticEnabled&&l.filterStaticEnabled,filterDirect:m.isFilterDirectEnabled&&l.filterDirectEnabled,filterDevice:m.isFilterByDeviceEnabled?g.devices.selectedItem:void 0,skipCountry:m.isSkipCountryEnabled?g.skipCountry.selectedItem:void 0,skipCity:m.isSkipCityEnabled?g.skipCity.selectedItem:void 0,skipIsp:!m.isSkipIspEnabled&&g.skipIsp.disabled?void 0:l.skipIsp})},state:n,reset:a,options:g,error:k,loading:c}},Ue=Symbol("proxy-access"),fs=()=>{const t=wt(Ue);if(!t)throw new Error("Need to call useProxyConfig");return t},ys=async(t={},s={})=>{const o=ms(t,s);return $t(Ue,o),await re(()=>o.loading.value).toBe(!1),o},bs={class:"@container"},vs={class:"tp-body-s flex flex-col gap-20 border-b border-neutral-100 pb-24 sm:flex-row sm:items-center"},gs={class:"custom-columns grid w-full gap-24"},ks={key:0,class:"flex items-center gap-16"},hs={class:"flex items-center gap-4"},Ss={key:1,class:"flex items-center gap-16"},Vs={key:2,class:"flex items-center gap-16"},Is={key:3,class:"flex items-center gap-16"},Ps={class:"mt-24 grid grid-cols-1 items-center gap-x-20 @md:grid-cols-2 @3xl:grid-cols-4"},Cs={key:4,class:"grid grid-cols-1 gap-x-20 @md:col-span-2 @md:grid-cols-2"},xs={key:5,class:"mb-28 mt-auto flex w-full items-center gap-10"},ws={class:"grid grid-cols-1 items-center gap-x-20 @md:grid-cols-2 @3xl:grid-cols-4"},$s=O({__name:"ProxyConfig",props:{userHash:{},hideResetButton:{type:Boolean},hideResetSessionsButton:{type:Boolean}},emits:["resetConfig","refreshSessions"],setup(t,{emit:s}){const o=s,{data:l}=G(),{state:a,reset:d,options:n}=fs(),g=()=>{const m=n.secondary.selectedItem?.searchValue;return m?[m]:n.primary.selectedItems?.map(r=>r.searchValue)??[]},k=()=>{const m=n.skipCity.selectedItem?.searchValue;return m?[m]:[n.skipCountry.selectedItem?.searchValue??""]},{mutate:c,isLoading:V}=Et({mutation:Va,onError(m){ve({id:"reset-sessions",message:Ee({error:m})})},onSuccess(){o("refreshSessions"),ve({id:"reset-sessions",message:Zt()})}}),p=Oe("(min-width: 640px)");return(m,r)=>{const f=Ht("tooltip");return u(),v("div",bs,[L("div",vs,[L("div",gs,[e(l).user.isHighEndPoolAccessEnabled?(u(),v("label",ks,[S(e(Z),{modelValue:e(a).highEndPoolEnabled,"onUpdate:modelValue":r[0]||(r[0]=i=>e(a).highEndPoolEnabled=i)},null,8,["modelValue"]),L("div",hs,[E(C(Lt())+" ",1),S(e(ke),null,{default:$(()=>[E(C(Dt()),1)]),_:1})])])):I("",!0),e(l).user.isSkipIspStaticAccessEnabled?(u(),v("label",Ss,[S(e(Z),{modelValue:e(a).skipIspStaticEnabled,"onUpdate:modelValue":r[1]||(r[1]=i=>e(a).skipIspStaticEnabled=i)},null,8,["modelValue"]),E(" "+C(Ot()),1)])):I("",!0),e(l).user.isFilterIspStaticEnabled?(u(),v("label",Vs,[S(e(Z),{modelValue:e(a).filterStaticEnabled,"onUpdate:modelValue":r[2]||(r[2]=i=>e(a).filterStaticEnabled=i)},null,8,["modelValue"]),E(" "+C(Rt()),1)])):I("",!0),e(l).user.isFilterDirectEnabled?(u(),v("label",Is,[S(e(Z),{modelValue:e(a).filterDirectEnabled,"onUpdate:modelValue":r[3]||(r[3]=i=>e(a).filterDirectEnabled=i)},null,8,["modelValue"]),E(" "+C(Bt()),1)])):I("",!0)]),m.hideResetButton?I("",!0):(u(),P(e(M),{key:0,class:"ml-auto w-full min-w-[142px] sm:w-max",size:"m",kind:"outlined",onClick:e(d)},{default:$(()=>[E(C(Tt()),1)]),_:1},8,["onClick"]))]),L("div",Ps,[S(Re,{modelValue:e(a).primaryLocations,"onUpdate:modelValue":r[4]||(r[4]=i=>e(a).primaryLocations=i),options:e(n).primary.items,disabled:e(n).primary.disabled,"selected-type":e(n).primary.selectedType},null,8,["modelValue","options","disabled","selected-type"]),S(e(R),{modelValue:e(a).secondaryLocation,"onUpdate:modelValue":r[5]||(r[5]=i=>e(a).secondaryLocation=i),label:Mt(),name:"state-region",options:e(n).secondary.items,"label-key":"displayValue","value-key":"id",search:"",placeholder:Q(),"placeholder-as-option":"",disabled:e(n).secondary.disabled},null,8,["modelValue","label","options","placeholder","disabled"]),e(n).isp.visible?(u(),P(e(te),{key:0,modelValue:e(a).isp,"onUpdate:modelValue":r[6]||(r[6]=i=>e(a).isp=i),loader:i=>e(Se)({...i,filterValue:g(),perPage:10}),"initial-options":e(a).ispItem?[e(a).ispItem]:[],multiple:!1,label:Ut(),name:"isp",placeholder:Q(),disabled:e(n).isp.disabled,"label-key":"displayValue","value-key":"filterValue",onChange:r[7]||(r[7]=i=>e(a).ispItem=i)},null,8,["modelValue","loader","initial-options","label","placeholder","disabled"])):I("",!0),S(e(R),{modelValue:e(a).rotation,"onUpdate:modelValue":r[8]||(r[8]=i=>e(a).rotation=i),label:zt(),"label-tooltip":Ft(),name:"rotation",options:e(n).rotation.items,"label-key":"label","value-key":"value"},null,8,["modelValue","label","label-tooltip","options"]),e(n).hostname.visible?(u(),P(ss,{key:1,modelValue:e(a).hostname,"onUpdate:modelValue":r[9]||(r[9]=i=>e(a).hostname=i),options:e(n).hostname.items,disabled:e(n).hostname.disabled},null,8,["modelValue","options","disabled"])):I("",!0),e(n).geoLocation.visible?(u(),P(ts,{key:2,modelValue:e(a).geoLocation,"onUpdate:modelValue":r[10]||(r[10]=i=>e(a).geoLocation=i),options:e(n).geoLocation.items},null,8,["modelValue","options"])):I("",!0),e(n).ipSkipping.visible?(u(),P(e(te),{key:3,modelValue:e(a).ipSkipping,"onUpdate:modelValue":r[11]||(r[11]=i=>e(a).ipSkipping=i),loader:i=>e(ha)(m.userHash,{page:i.page,perPage:10}),"initial-options":e(a).ipSkippingItem?[e(a).ipSkippingItem]:[],multiple:!1,label:_t(),name:"ip-skipping",disabled:e(n).ipSkipping.disabled,"label-key":"title","value-key":"hash",placeholder:At(),onChange:r[12]||(r[12]=i=>e(a).ipSkippingItem=i)},null,8,["modelValue","loader","initial-options","label","disabled","placeholder"])):I("",!0),e(n).ttl.visible?(u(),v("div",Cs,[S(e(ce),{modelValue:e(a).ttlValue,"onUpdate:modelValue":r[13]||(r[13]=i=>e(a).ttlValue=i),name:"ttl",label:Kt(),"label-tooltip":Nt(),type:"number",min:1,max:e(n).ttl.selectedItem?.max,"hide-empty-decorations":""},null,8,["modelValue","label","label-tooltip","max"]),S(e(R),{modelValue:e(a).ttlFormat,"onUpdate:modelValue":r[14]||(r[14]=i=>e(a).ttlFormat=i),class:"mt-auto",name:"ip-skipping",options:e(n).ttl.items,"label-key":"label","value-key":"value"},null,8,["modelValue","options"])])):I("",!0),e(n).ttl.visible&&e(l).user.isRemoveSessionsEnabled&&!m.hideResetSessionsButton?(u(),v("div",xs,[ue((u(),P(e(M),{class:"w-full @lg:w-max",disabled:e(V),onClick:e(c)},{default:$(()=>[E(C(jt()),1)]),_:1},8,["disabled","onClick"])),[[f,e(p)&&be()]]),e(p)?I("",!0):(u(),P(e(ke),{key:0},{default:$(()=>[E(C(be()),1)]),_:1}))])):I("",!0)]),L("div",ws,[e(n).devices.visible?(u(),P(e(R),{key:0,modelValue:e(a).filterDevice,"onUpdate:modelValue":r[15]||(r[15]=i=>e(a).filterDevice=i),label:qt(),name:"filter-device",options:e(n).devices.items,"label-key":"label","value-key":"value","placeholder-as-option":"",placeholder:Q()},null,8,["modelValue","label","options","placeholder"])):I("",!0),e(n).skipCountry.visible?(u(),P(e(R),{key:1,modelValue:e(a).skipCountry,"onUpdate:modelValue":r[16]||(r[16]=i=>e(a).skipCountry=i),label:Gt(),name:"skip-country",options:e(n).skipCountry.items,"label-key":"displayValue","value-key":"id",disabled:e(n).skipCountry.disabled,"placeholder-as-option":"",search:""},{placeholder:$(({insidePopup:i})=>[E(C(i?Q():Qt()),1)]),_:1},8,["modelValue","label","options","disabled"])):I("",!0),e(n).skipCity.visible?(u(),P(e(R),{key:2,modelValue:e(a).skipCity,"onUpdate:modelValue":r[17]||(r[17]=i=>e(a).skipCity=i),label:Wt(),name:"skip-city",options:e(n).skipCity.items,"label-key":"displayValue","value-key":"id",disabled:e(n).skipCity.disabled,"placeholder-as-option":"",search:""},{placeholder:$(({insidePopup:i})=>[E(C(i?Q():Xt()),1)]),_:1},8,["modelValue","label","options","disabled"])):I("",!0),e(n).skipIsp.visible?(u(),P(e(te),{key:3,modelValue:e(a).skipIsp,"onUpdate:modelValue":r[18]||(r[18]=i=>e(a).skipIsp=i),loader:i=>e(Se)({...i,filterValue:k(),perPage:10}),"initial-options":e(a).skipIspItem?[e(a).skipIspItem]:[],multiple:!1,label:Jt(),name:"skip-isp",placeholder:Yt(),disabled:e(n).skipIsp.disabled,"label-key":"displayValue","value-key":"filterValue",onChange:r[19]||(r[19]=i=>e(a).skipIspItem=i)},null,8,["modelValue","loader","initial-options","label","placeholder","disabled"])):I("",!0)])])}}}),Es=de($s,[["__scopeId","data-v-ccf9f2c0"]]),Ls=(t,s="")=>q({apiType:"residential",path:`v1/residential-subusers?${ae({page:t,search:s})}`}),Fs=O({__name:"Layout",props:{title:{},data:{}},emits:["back","submit"],async setup(t,{emit:s}){let o,l;const a=s,{data:d}=ea(),{data:n}=G(),g=T(t.data?.name??""),k=T(t.data?.advanced??!1),{state:c,options:V,generateConfig:p,reset:m}=([o,l]=ta(()=>ys({},{persist:!1,initialState:ge(t.data?.mainConfig)})),o=await o,l(),o),r=w(()=>{const h=n.value.product.additionalData.host;return V.geoLocation.visible?c.geoLocation??h:h}),f=w(()=>({hash:d.value?.royalResidential.appHash??"",username:n.value.user.proxyUsername??"",password:n.value.user.proxyPassword??""})),i=T({hash:t.data?.additionalConfig.hash??f.value.hash,username:t.data?.additionalConfig.username??f.value.username,password:t.data?.additionalConfig.password??f.value.password}),x=async h=>{const y=await Ls(h.page,h.search);if(h.page===1){const b=h.search.trim().toLowerCase();(b===""||f.value.username.toLowerCase().includes(b))&&y.data.unshift({...f.value})}return y},D=()=>{const h=[],y=c.primaryLocations;for(const F of V.primary.items)if(F.type==="country"&&y.includes(F.id)&&(h.push(F.filterValue),h.length===y.length))break;const b=t.data?.additionalConfig.sessionId??ka(),{username:K,password:H}=i.value;a("submit",{name:g.value,advanced:k.value,proxy:{type:"http",host:r.value,port:c.port,username:K,password:`${H}${p(b)}`,bypassList:[]},mainConfig:ge(c),additionalConfig:{hash:i.value.hash,username:K,password:H,sessionId:b,countryCodes:h}})};return(h,y)=>(u(),P(aa,{title:h.title,onBack:y[6]||(y[6]=b=>a("back"))},{actions:$(()=>[S(e(M),{kind:"text",size:"s",onClick:y[0]||(y[0]=b=>e(m)())},{default:$(()=>[S(e(A),{type:"refresh",class:"size-16"}),E(" "+C(("m"in h?h.m:e(le)).commonReset()),1)]),_:1}),_(h.$slots,"actions")]),default:$(()=>[S(e(da),{class:"flex flex-col",onSubmit:D},{default:$(()=>[S(ra,{modelValue:e(g),"onUpdate:modelValue":y[1]||(y[1]=b=>sa(g)?g.value=b:null)},null,8,["modelValue"]),e(n).user.isApiEnabled?(u(),P(e(te),{key:0,"model-value":e(i).hash,loader:x,label:("m"in h?h.m:e(le)).extensionProxiesUser(),name:"user","value-key":"hash","label-key":"username",placeholder:"'Select user'",multiple:!1,"disable-clearing":"","initial-options":[e(i)],onChange:y[2]||(y[2]=b=>{i.value={...b}})},null,8,["model-value","label","initial-options"])):I("",!0),e(k)?(u(),v(j,{key:1},[S(e(is),{modelValue:e(c).port,"onUpdate:modelValue":y[3]||(y[3]=b=>e(c).port=b),options:e(V).ports.items},null,8,["modelValue","options"]),S(e(Es),{"hide-reset-button":"","hide-reset-sessions-button":"","user-hash":e(d)?.royalResidential.appHash},null,8,["user-hash"])],64)):(u(),P(e(Re),{key:2,modelValue:e(c).primaryLocations,"onUpdate:modelValue":y[4]||(y[4]=b=>e(c).primaryLocations=b),options:e(V).primary.items,disabled:e(V).primary.disabled,"selected-type":e(V).primary.selectedType},null,8,["modelValue","options","disabled","selected-type"])),_(h.$slots,"default"),e(k)?I("",!0):(u(),P(e(M),{key:3,class:"mt-8 w-full",kind:"outlined",onClick:y[5]||(y[5]=b=>k.value=!0)},{default:$(()=>[E(C(("m"in h?h.m:e(le)).extensionProxiesAdvancedSettings()),1)]),_:1}))]),_:3})]),_:3},8,["title"]))}});export{Fs as _,G as u};
