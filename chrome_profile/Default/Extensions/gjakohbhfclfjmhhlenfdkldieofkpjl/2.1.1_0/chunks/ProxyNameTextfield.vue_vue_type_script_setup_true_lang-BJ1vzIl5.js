import{d as L,c as y,o as u,a as k,p as A,k as b,h as C,t as x,u as c,j as S,q as j,ab as Y,x as h,ba as R,a5 as G,aI as ie,aJ as ue,s as K,bb as de,bc as ce,b6 as J,bd as me,be as fe,bf as H,bg as pe,bh as ve,bi as ye,an as Z,al as he,bj as be,n as V,I as F,b as I,bk as U,bl as ge,e as _,m as we,f as ee,bm as ke,a3 as Se,bn as Ve,bo as X,F as Q,l as W,_ as Me}from"./popup-Bk9gj0yf.js";import{_ as $e,a as Te}from"./Popup.vue_vue_type_script_setup_true_lang-JHYm3gwT.js";import{m as Ee,k as xe,l as Ce,o as ze,q as Be,r as Ie,u as Ae,v as Ne,x as Fe,y as Le,z as Ke,n as qe}from"./_virtual_wxt-plugins-DHgd7gkO.js";import{T as Oe}from"./TooltipIcon-CmPyCcbT.js";const De={class:"grow"},Pe={class:"tp-body-s"},je={key:0,class:"mb-8 flex min-h-[20px] gap-8"},Ue={key:0,class:"font-semibold"},He={key:0,class:"tp-body-s mt-8 grid min-h-[20px] select-text flex-col truncate text-error-600"},Re=["data-testid"],te=L({__name:"Field",props:{hideEmptyDecorations:{type:Boolean,default:!1},label:{default:""},labelTooltip:{default:""},errorMessage:{default:""},name:{default:""}},setup(e){return(a,l)=>(u(),y("div",De,[k("label",Pe,[!a.hideEmptyDecorations||a.label?(u(),y("div",je,[typeof a.label=="string"?(u(),y("div",Ue,x(a.label),1)):A("",!0),a.labelTooltip?(u(),C(c(Oe),{key:1},{default:S(()=>[j(x(a.labelTooltip),1)]),_:1})):A("",!0),b(a.$slots,"label")])):A("",!0),b(a.$slots,"default")]),!a.hideEmptyDecorations||a.errorMessage?(u(),y("div",He,[a.errorMessage?(u(),y("div",{key:0,class:"whitespace-normal","data-testid":`field-error-message__${a.name}`},x(a.errorMessage),9,Re)):b(a.$slots,"info",{key:1})])):A("",!0)]))}}),ae=e=>{if(e==="l")return"min-h-[40px] px-16 py-12 z-[1]";if(e==="s")return"min-h-[16px] px-8 py-4 z-[1]";if(e==="m")return"min-h-[24px] px-16 py-8 z-[1]";throw new Error("Invalid size")},le=(e,a)=>typeof e!="object"&&typeof a!="object"?e===a:typeof e=="object"!=(typeof a=="object")?!1:e===a?!0:e===null||a===null||Array.isArray(e)!==Array.isArray(a)||Object.keys(e).length!==Object.keys(a).length?!1:Object.entries(e).every(([l,o])=>l in a&&le(o,a[l])),Ge=e=>{const a=Y(new Map);let l=null,o=!1;const m=h(()=>G(e.multiple)),n=()=>{o=!0,l?.(()=>{const i=a.keys();if(m.value===!0)e.target.value=[...i];else{const z=i.next().value;e.target.value=z}}),queueMicrotask(()=>{o=!1})},{ignoreUpdates:f}=R(a,()=>{o||n()},{deep:!0}),{ignoreUpdates:v}=R(e.target,(i,z)=>{o||le(i,z)||(o=!0,f(()=>{if(a.clear(),i!=null){const E=G(e.items),B=$=>{const T=E.find(w=>e.key(w)===$);(e.allowEmptyValues===!0||T)&&a.set($,T)};Array.isArray(i)?i.forEach(($,T)=>{(m.value===!0||T===0)&&B($)}):B(i)}}),o=!1)},{immediate:!0,deep:!0});l=v;const g=h(()=>a.values().next().value);return{batchSelectionMapUpdates:i=>{f(i),n()},selectionMap:a,firstSelectedItem:g}},se=Symbol("form-state"),Je=()=>{const e=Y(new Map),m={validationErrors:h(()=>{const n=[];for(const f of e.values()){const{fieldName:v,isValid:g,errorMessage:M}=f.validator();g||n.push({fieldName:v,isValid:g,errorMessage:M})}return n}),fields:e,resetTouched:()=>{for(const n of e.values())n.isTouched.value=!1},markAllAsTouched:()=>{for(const n of e.values())n.isTouched.value=!0}};return ue(se,m),m},oe=e=>{let a=ie(se,null);return a||(a=Je()),a},wt=L({__name:"Form",emits:["submit"],setup(e,{emit:a}){const l=a,o=oe(),m=n=>{const f=n;f.preventDefault();const{submitter:v}=f;if(!(v instanceof HTMLButtonElement&&v.getAttribute("type")!=="submit")){if(o.validationErrors.value.length>0){o.markAllAsTouched();const g=o.validationErrors.value?.[0]?.fieldName,M=f.target;if(!g)return;M.querySelector(`[name="${g}"]`)?.focus();return}l("submit",f),o.resetTouched()}};return(n,f)=>(u(),y("form",{novalidate:"",onSubmit:m},[b(n.$slots,"default")],32))}}),re=e=>{const a=K(!1),l=oe(),o=Symbol("field");return de(()=>{l.fields.set(o,{isTouched:a,validator:e.validator})}),ce(()=>{l.fields.delete(o)}),{isTouched:a}},Xe=async(e,a)=>{try{return await navigator.clipboard.writeText(e),J({id:"copy-to-clipboard",message:a,duration:3e3}),!0}catch{J({id:"copy-to-clipboard",message:"Failed to copy to clipboard. Please check browser clipboard permissions.",duration:3e3})}return!1},Qe=e=>Ee(e,me({max:e})),We=e=>xe(e,fe({min:e})),Ye=()=>Ce(H()),Ze=()=>ze(pe()),_e=e=>Be(e,ve({max:e})),et=e=>Ie(e,ye({min:e})),tt=["data-testid"],ne=L({__name:"TextField",props:{as:{default:"input"},type:{default:"text"},modelValue:{default:e=>e.type==="number"?0:""},name:{},size:{default:Z().textFieldFallbackSize},placeholder:{default:""},required:{type:Boolean,default:!1},readonly:{type:Boolean},minLength:{},maxLength:{},min:{},max:{},step:{default:1},rows:{},maxHeight:{default:"400px"},disabled:{type:Boolean},inputmode:{},disableValidation:{type:Boolean},validators:{},autocomplete:{},hideEmptyDecorations:{type:Boolean,default:!1},label:{default:""},labelTooltip:{},errorMessage:{}},emits:["change","update:modelValue","paste"],setup(e,{emit:a}){const l=e,o=a,m=h(()=>l.type==="number"),n=(t,p)=>{m.value?o(t,Number(p)):o(t,p)},f=K(!1),v=K(!1),g=h(()=>["password","search"].includes(l.type)),M={s:"w-16 h-16",m:"w-20 h-20",l:"w-24 h-24"},i=t=>{const p=t.clipboardData?.getData("text/plain"),s=Number(p);if(m.value){if(t.preventDefault(),!Number.isFinite(s))return;const d=t.target,r=Math.floor(s);d.valueAsNumber=r,n("update:modelValue",String(r))}o("paste",t)},z=async()=>{v.value||l.modelValue===void 0||!await Xe(String(l.modelValue),ge())||(v.value=!0,setTimeout(()=>{v.value=!1},1e3))},E=t=>{if(m.value){if(t.ctrlKey||t.metaKey||t.altKey||t.key==="Enter")return;/\d/.test(t.key)||t.preventDefault()}},B=()=>l.type==="number"?Fe():Le(),$=h(()=>{const t=[B()];return l.required&&l.type!=="number"&&t.push(Ye()),l.validators&&t.push(...l.validators()),l.type==="email"&&t.push(Ze()),l.minLength!==void 0&&t.push(We(l.minLength)),l.maxLength!==void 0&&t.push(Qe(l.maxLength)),l.min!==void 0&&t.push(et(l.min)),l.max!==void 0&&t.push(_e(l.max)),Ne(Ke(...t),{abortPipeEarly:!0})}),T=h(()=>B()),w=h(()=>{const t=!l.required&&l.modelValue===""||l.disableValidation?T.value:$.value;return Ae(t,l.modelValue)}),N=h(()=>{const{type:t}=l;return t==="email"?"email":t==="number"?"numeric":t==="search"?"search":t==="tel"?"tel":t==="url"?"url":"text"}),{isTouched:q}=re({validator:()=>({fieldName:l.name,isValid:w.value.success,errorMessage:w.value?.issues?.[0].message})}),O=h(()=>l.errorMessage?l.errorMessage:!q.value||w.value.success?"":w.value.issues[0].message),D=h(()=>l.disabled?"bg-neutral-100 text-neutral-400 ring-neutral-400 [-webkit-text-fill-color:theme(colors.neutral.400)]":l.readonly?"bg-neutral-50 ring-neutral-400 read-only:text-brand-800":O.value?"ring-error-600":"ring-neutral-300 focus-within:ring-brand-300");return(t,p)=>(u(),C(c(te),{name:l.name,"error-message":O.value,label:t.label,"label-tooltip":t.labelTooltip,"hide-empty-decorations":t.hideEmptyDecorations},{info:S(()=>[b(t.$slots,"info")]),label:S(()=>[b(t.$slots,"label")]),default:S(()=>[k("div",{class:V(["relative flex w-full items-center rounded-4 bg-neutral-0 ring-1 ring-inset focus-within:ring-2",D.value])},[(u(),C(he(t.as),{value:t.modelValue,type:f.value||t.type==="search"?"text":t.type,name:t.name,readonly:t.readonly,required:t.required,placeholder:t.placeholder,min:t.min,max:t.max,"min-length":t.minLength,"max-length":t.maxLength,rows:t.rows,disabled:t.disabled,autocomplete:t.autocomplete,step:t.step,inputmode:t.inputmode??N.value,class:V(["w-full grow rounded-[inherit] bg-transparent outline-none placeholder:text-neutral-600",[c(ae)(t.size),t.size==="s"?"tp-body-xs":"tp-body",g.value&&(t.size==="s"?"pr-32":"pr-48")]]),style:be({"max-height":t.maxHeight}),onInput:p[0]||(p[0]=s=>n("update:modelValue",s.target.value)),onChange:p[1]||(p[1]=s=>n("change",s.target.value)),onKeypress:E,onPaste:i,onBlur:p[2]||(p[2]=s=>q.value=!0)},null,40,["value","type","name","readonly","required","placeholder","min","max","min-length","max-length","rows","disabled","autocomplete","step","inputmode","class","style"])),k("div",{class:V(["absolute top-0 z-[1] flex h-full items-center text-neutral-600",t.size==="s"?"right-8":"right-16"])},[t.type==="search"?(u(),C(c(F),{key:0,type:"search",inert:"",class:V(M[t.size])},null,8,["class"])):t.type==="password"&&!t.disabled?(u(),y("button",{key:1,class:"cursor-pointer",type:"button","data-testid":f.value?"textfield-hide-password":"textfield-show-password",onClick:p[3]||(p[3]=U(s=>f.value=!f.value,["prevent"]))},[I(c(F),{type:f.value?"eye":"eye-off",inert:""},null,8,["type"])],8,tt)):t.readonly?(u(),y("button",{key:2,type:"button",class:"cursor-pointer bg-neutral-50",onClick:U(z,["prevent"])},[I(c(F),{class:"text-brand-800",type:v.value?"check":"copy"},null,8,["type"])])):A("",!0),b(t.$slots,"side-buttons")],2)],2)]),_:3},8,["name","error-message","label","label-tooltip","hide-empty-decorations"]))}}),at=["aria-selected","data-disabled"],lt=L({__name:"SelectListItem",props:{value:{},selected:{type:Boolean},disabled:{type:Boolean},hideSelectedIcon:{type:Boolean,default:!1}},emits:["click"],setup(e,{emit:a}){const l=a;return(o,m)=>(u(),y("li",{role:"option",tabindex:-1,"aria-selected":o.selected,class:"select-item tp-body-s flex min-h-[40px] cursor-pointer items-center rounded-4 p-8 outline-none -outline-offset-1 hover:bg-brand-100 focus:bg-brand-100","data-disabled":o.disabled||void 0,onClick:m[0]||(m[0]=n=>l("click",o.value))},[b(o.$slots,"default",{},void 0,!0),o.selected&&!o.hideSelectedIcon?(u(),C(c(F),{key:0,type:"check",inert:"",class:"ml-auto"})):A("",!0)],8,at))}}),st=_(lt,[["__scopeId","data-v-6c4a955f"]]),ot={class:"relative w-full"},rt=["aria-controls","aria-owns","aria-expanded"],nt={key:1,class:"flex flex-wrap items-center gap-4 overflow-hidden"},it=["onClick","onKeydown"],ut={class:"w-full truncate"},dt={key:2,class:"grid w-full overflow-hidden"},ct={class:"w-full truncate"},mt={class:"select-popup-h scrollbar-thin relative overflow-auto"},ft={key:0,class:"fixed top-0 w-full bg-neutral-0 px-8 pt-8"},pt={key:0},vt=L({__name:"Select",props:we({modelValue:{},search:{type:Boolean,default:!1},multiple:{},maxSelections:{default:()=>Number.MAX_SAFE_INTEGER},options:{},size:{default:()=>Z().selectFallbackSize},disabled:{type:Boolean,default:!1},placeholder:{default:""},placeholderAsOption:{type:Boolean,default:!1},disableOption:{type:Function,default:()=>!1},name:{},valueKey:{},labelKey:{},required:{type:Boolean},hideSelectedIcon:{type:Boolean,default:!1},hideEmptyDecorations:{type:Boolean,default:!1},label:{default:""},labelTooltip:{},errorMessage:{default:""}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const a=ee(e,"modelValue"),l=s=>s[e.valueKey],o=s=>s[e.labelKey],m=ke("select"),n=K(!1),f=()=>{if(e.disabled){n.value=!1;return}n.value=!n.value},v=K(""),{firstSelectedItem:g,batchSelectionMapUpdates:M,selectionMap:i}=Ge({items:()=>e.options,multiple:()=>e.multiple??!1,target:a,key:s=>s[e.valueKey]});Se(()=>e.options,()=>{M(()=>{i.forEach((s,d)=>{const r=e.options.find(P=>l(P)===d);r?i.set(d,r):i.delete(d)})})},{flush:"post"});const z=(s,d)=>{if(!d)return!0;const r=o(s);return typeof r=="string"?r.toLowerCase().includes(d):!1},E=Symbol("placeholderItem"),B=()=>({[E]:!0,[e.valueKey]:void 0,[e.labelKey]:e.placeholder}),$=h(()=>{const s=v.value.toLowerCase()?.trim();if(!s)return e.placeholderAsOption?[B(),...e.options]:e.options;const d=typeof e.search=="function"?e.search:z;return e.options.filter(r=>d(r,s,v.value))}),{isTouched:T}=re({validator:()=>({fieldName:e.name,isValid:t.value==="",errorMessage:t.value})});Ve(()=>!n.value,()=>{v.value="",T.value=!0});const w=s=>{M(()=>{const d=l(s);e.placeholderAsOption&&E in s?i.clear():e.multiple?i.has(d)?i.delete(d):i.set(d,s):(i.clear(),i.set(d,s))}),n.value=!1},N=s=>i.has(l(s))?!0:e.placeholderAsOption&&i.size===0?E in s:!1,q=h(()=>{const s=$.value.findIndex(d=>N(d));return s===-1?0:s}),O=h(()=>e.multiple&&i.size>=e.maxSelections),D=qe(),t=h(()=>{if(e.errorMessage)return e.errorMessage;if(e.disabled||!T.value)return"";if(e.required){if(Array.isArray(a.value)){if(a.value.length===0)return H()}else if(!a.value)return H()}return""}),p=h(()=>e.size==="l"?"tp-body":"tp-body-s");return(s,d)=>(u(),C(c(te),{"error-message":t.value,label:s.label,"hide-empty-decorations":s.hideEmptyDecorations,"label-tooltip":s.labelTooltip},{label:S(()=>[b(s.$slots,"label",{},void 0,!0)]),info:S(()=>[b(s.$slots,"info",{},void 0,!0)]),default:S(()=>[k("div",ot,[k("div",{ref_key:"select",ref:m,role:"combobox","aria-controls":c(D),"aria-owns":c(D),"aria-expanded":n.value,tabindex:"0",class:V(["relative flex w-full items-center gap-8 rounded-4 bg-neutral-0 outline-none ring-1 ring-inset focus-visible:ring-2",[c(ae)(s.size),s.disabled?"bg-neutral-100 text-neutral-400 ring-neutral-400 [-webkit-text-fill-color:theme(colors.neutral.400)]":{"ring-error-600":t.value,"focus:ring-brand-300":!t.value,"ring-2 ring-brand-300":n.value&&!t.value,"ring-neutral-300":!n.value&&!t.value,"cursor-pointer":!0},p.value]]),onClick:f,onKeydown:X(f,["enter"])},[!c(g)||c(i).size===0?(u(),y("div",{key:0,class:V(!s.placeholderAsOption&&"truncate text-neutral-600")},[b(s.$slots,"placeholder",{insidePopup:!1},()=>[j(x(s.placeholder),1)],!0)],2)):s.multiple?(u(),y("div",nt,[(u(!0),y(Q,null,W(c(i).values(),r=>(u(),y("div",{key:l(r),role:"button",tabindex:"0",class:V(["body-xs flex items-center gap-4 overflow-hidden rounded-2 bg-brand-200 px-4 outline-2 outline-brand-400",[n.value&&"z-10",p.value]]),onClick:U(P=>w(r),["stop"]),onKeydown:X(U(P=>w(r),["stop"]),["enter"])},[k("span",ut,x(o(r)),1),I(c(F),{type:"cancel",class:"size-16 cursor-pointer"})],42,it))),128))])):(u(),y("div",dt,[k("div",ct,[b(s.$slots,"default",{selected:!0,option:c(g),insidePopup:!1},()=>[j(x(o(c(g))),1)],!0)])])),I(c(F),{type:"expand-arrow",class:"ml-auto",inert:""})],42,rt)]),I($e,{modelValue:n.value,"onUpdate:modelValue":d[1]||(d[1]=r=>n.value=r),target:c(m),class:V(["rounded-4 bg-neutral-0 shadow-l",s.search&&"scroll-p-[50px] pt-[50px]"]),sizing:r=>({width:`${r.reference.width}px`})},{default:S(()=>[k("div",mt,[s.search?(u(),y("div",ft,[I(ne,{modelValue:v.value,"onUpdate:modelValue":d[0]||(d[0]=r=>v.value=r),"hide-empty-decorations":"",size:"m",type:"search",name:"search",placeholder:"Search",autocomplete:"off"},null,8,["modelValue"])])):A("",!0),I(Te,{class:"p-8","aria-orientation":"vertical",role:"listbox","default-focus-index":q.value},{default:S(()=>[(u(!0),y(Q,null,W($.value,r=>(u(),C(st,{key:l(r),selected:N(r),disabled:!N(r)&&(O.value||s.disableOption(r)),value:r,"hide-selected-icon":s.hideSelectedIcon,onClick:P=>w(r)},{default:S(()=>[c(E)in r?(u(),y("div",pt,[k("div",{class:V(["truncate",p.value])},[b(s.$slots,"placeholder",{insidePopup:!0},()=>[j(x(o(r)),1)],!0)],2)])):b(s.$slots,"default",{key:1,selected:N(r),option:r,insidePopup:!0},()=>[k("div",{class:V(["truncate",p.value])},x(o(r)),3)],!0)]),_:2},1032,["selected","disabled","value","hide-selected-icon","onClick"]))),128))]),_:3},8,["default-focus-index"])])]),_:3},8,["modelValue","target","class","sizing"])]),_:3},8,["error-message","label","hide-empty-decorations","label-tooltip"]))}}),kt=_(vt,[["__scopeId","data-v-4fe91bb4"]]),St=L({__name:"ProxyNameTextfield",props:{modelValue:{required:!0},modelModifiers:{}},emits:["update:modelValue"],setup(e){const a=ee(e,"modelValue");return(l,o)=>(u(),C(c(ne),{modelValue:a.value,"onUpdate:modelValue":o[0]||(o[0]=m=>a.value=m),name:"proxyName",label:("m"in l?l.m:c(Me)).extensionProxyProfileName(),required:"","max-length":255},null,8,["modelValue","label"]))}});export{kt as S,St as _,ne as a,wt as b,te as c,le as e,ae as g,Ge as u};
