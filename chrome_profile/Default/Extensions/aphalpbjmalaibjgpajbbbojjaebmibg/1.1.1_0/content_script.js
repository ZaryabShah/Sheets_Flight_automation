!function(){console.log("inject script...");var e="",i={},l=document.querySelectorAll("script");l&&l.length>0&&l.forEach((function(l){var o=l?l.innerText:"";if(o&&o.includes("var obj = jQuery.parseJSON")){var r=o.match(/\{(.*)\}/g);r&&r.length>0&&r.forEach((function(i){i.includes("alwaysIncludeVideo")&&(e=i)}))}else o&&o.includes("ImageBlockATF")&&o.match(/\{(.*)\}/g).forEach((function(e){if(e&&e.includes("hiRes")){e=(e=(e=e.replace("'initial'",'"initial"')).replaceAll(/"/g,"'")).replaceAll(/'/g,'"');try{var l=JSON.parse(e);console.log(l),i.currentImages=l.initial}catch(e){console.log(e)}}}))}));try{e=e.replace(/'/g,'"');var o=JSON.parse(e);i.title=o.title,i.parentAsin=o.parentAsin;var r=o.colorImages;i.colorImages=r;var n=o.videos;if(n&&n.length>0){var t=[];for(var a in n){var s=n[a];t.push({title:s.title,url:s.url,durationTimestamp:s.durationTimestamp,durationSeconds:s.durationSeconds,slateUrl:s.slateUrl})}i.videos=t}else i.videos;i.colorToAsin=o.colorToAsin}catch(e){console.log(e)}var c=window.location.href,d="";if(c.indexOf("/dp/")>-1){var p=c.split("/dp/")[1];d=p.indexOf("/")>-1?p.split("/")[0]:p.split("?")[0]}else if(c.indexOf("/gp/product/")>-1){var u=c.split("/gp/product/")[1];d=u.indexOf("/")>-1?u.split("/")[0]:u.split("?")[0]}chrome.runtime.sendMessage({messageType:"RETURN_DATA_DETAIL",data:{productId:d,productInfo:i}},(function(e){console.log("send msg done",e)}))}();